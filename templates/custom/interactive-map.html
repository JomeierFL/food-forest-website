<div id="map-container">

<div id="map-description">
    {% set areas = get_section(path="food-forest-section/_index.md") %}
    {% for area in areas.pages %}
    <div class="{{ area.slug }} {% if area.slug == 'intro' %}visible{% endif %} ">
        <h2>{{ area.title }}</h2>
        {{ area.content | safe}}
    </div>
    {% endfor %}
</div>

<!-- Original viewBox:  viewBox="0 100 841.89 595.276" -->
<svg
    id="food-forest-diagram"
    viewBox="50 100 700 400"
    width="100%"
    preserveAspectRatio="xMidYMid meet"
    xmlns="http://www.w3.org/2000/svg">

    <!-- Background image cropped to viewBox -->
    <image
        href="../img/waldgarten-optimized-final.webp"
        x="0"
        y="0"
        width="841.89"
        height="595.276"
        preserveAspectRatio="xMidYMid meet" />

    <!-- Hitboxes -->
    <path
        style="fill:#000000;stroke-width:0.75;stroke:#000000;stroke-opacity:0;fill-opacity:0"
        d="m 320.78659,209.15029 -27.14291,23.17081 -9.6651,34.02726 -2.64749,28.33341 3.9721,11.38684 11.51835,10.19546 26.61341,5.95774 25.68592,-8.73848 25.02405,-17.21219 -9.93072,-14.29996 2.38362,-19.99206 -18.40444,-30.3199 -21.58144,-25.81829 z"
        id="tree-left" />
    <path
        style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:0.75;stroke-opacity:0"
        d="m 332.46819,210.00337 30.14634,37.44862 24.71613,21.90803 31.83243,-8.23953 4.86859,18.5371 -0.37441,46.62418 17.78704,-0.37441 0.18844,-56.73454 11.04639,-15.16739 31.0836,-5.05579 -5.80462,-23.21849 26.77417,-21.53363 -24.90334,-22.84284 -6.74065,-11.98365 16.66504,-23.5929 -41.00675,-23.40568 -32.01841,1.12323 -26.96384,11.42204 -19.47312,10.11036 -1.12324,15.91621 -20.5976,14.23136 2.43491,14.97895 -16.66504,-0.18721 z"
        id="tree-middle" />
    <path
        style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:0.75;stroke-opacity:0"
        d="m 508.48011,204.01155 15.16615,-15.3546 8.80116,10.86042 5.99182,16.10342 20.97078,10.86041 17.60107,5.80463 -4.68138,25.27775 -20.40917,7.11507 -15.16738,8.05109 1.12447,14.60577 -12.35931,8.42551 -5.24177,8.98835 -1.49887,6.55344 -5.24301,14.23013 -1.68486,-24.52892 -10.86041,-6.74066 -24.52893,-1.49764 -4.86859,-10.67322 -12.54527,-11.04762 2.80932,-14.41734 1.12324,-2.80932 23.21849,-4.11853 -5.80462,-22.46966 z"
        id="tree-right" />
    <path
        style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:0.75;stroke-opacity:0"
        d="m 367.27005,327.10942 6.17903,-27.14982 20.40917,-12.17086 16.66503,7.67669 -2.24647,14.41733 9.73594,2.43491 -0.74882,15.16616 -34.07767,2.80932 -16.47783,-0.56162 z"
        id="perennials-left" />
    <path
        style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:0.75;stroke-opacity:0"
        d="m 444.13417,305.38735 0.37441,27.89986 -6.55344,21.90681 30.52075,4.30698 3.18374,-20.22196 3.74412,-37.44984 z"
        id="perennials-middle-left" />
    <path
       style="fill:#000000;stroke:#000000;stroke-width:0.75;stroke-opacity:0;fill-opacity:0.00917431"
       d="m 477.76181,301.8854 -3.75347,42.36047 38.07081,-2.68103 -3.21725,-39.14323 z"
       id="perennials-middle-right" />
    <path
        style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:0.75;stroke-opacity:0"
        d="m 515.43383,326.73377 6.36624,-21.72084 14.04292,-13.4813 c 0,0 13.48253,-0.002 15.5418,1.49765 2.05927,1.49888 17.03822,15.1674 17.03822,15.1674 l 7.67792,14.41733 z"
        id="perennials-right" />
    <path
        style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:0.75;stroke-opacity:0"
        d="m 340.53406,329.7303 -0.93603,-5.42898 -94.18314,2.43368 -2.24771,8.98712 -42.87882,13.10813 -7.48948,19.84754 196.98147,-14.41733 1.31044,-17.03945 z"
        id="mykorrhiza" />
    <path
        style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:0.75;stroke-opacity:0"
        d="m 566.11126,302.76647 12.17086,18.53709 146.80037,-10.11159 -12.35806,-28.27428 -53.92644,-5.61741 -60.10548,-5.42898 z"
        id="bushes-right" />
    <path
       style="fill:#000000;fill-opacity:0.0091743;stroke:#000000;stroke-width:0.75;stroke-opacity:0"
       d="m 128.15384,297.59573 -4.82588,36.99839 117.42967,-0.53621 3.21725,-9.65175 43.43289,-1.07241 -32.17251,-42.89669 -28.41905,8.57934 -36.46218,21.44834 -35.92597,-21.44834 z"
       id="bushes-left" />
    <path
        style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:0.75;stroke-opacity:0"
        d="m 131.70934,356.90721 -1.12323,3.93133 4.86859,1.49764 4.30697,-4.86735 -5.61741,-2.62212 z"
        id="easteregg" />
    <path
        style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:0.75;stroke-opacity:0"
        d="m 460.05038,254.64341 -7.4907,1.49888 -9.73596,14.23013 0.37442,33.33007 32.76722,-3.18373 -4.30574,-15.72901 -14.23136,-13.66851 z"
        id="insects" />
    <path
        style="fill:#000000;fill-opacity:0;stroke:#000000;stroke-width:0.75;stroke-opacity:0"
        d="m 470.11763,359.31379 4.49418,-22.28122 37.63582,-2.0605 -1.68485,22.09525 z"
        id="earthworms" />
</svg>

</div>

<script>
    
    let map = document.getElementById("food-forest-diagram");
    let description = document.getElementById("map-description");
    let current_selection = "intro";

    function handler(name) {
        console.log(name);
        toggleVisible(current_selection);
        current_selection = name;
        toggleVisible(current_selection);
    }

    // toggle visibility of description block
    function toggleVisible(name) {
        let block = description.getElementsByClassName(name);
        console.log(block)
        block[0].classList.toggle("visible");
    }


    for (let item of map.children) {
        if (item.tagName === "path") {
            item.addEventListener("click", () => {
                handler(item.id)
            });
        }
    }
    
</script>


<div>
    <p>Quellen:</p>
    <p>1. Jacke, D., & Toensmeier, E. (2005). Edible Forest Gardens: Ecological Vision and Theory for Temperate-Climate Permaculture (Vol. 1). Chelsea Green Publishing.</p>
    <p>2. Crawford, M. (2010). Creating a forest garden: Working with nature to grow edible crops. Green Books. </p>
</p>
</div>
